"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[63],{9700:function(w,I,t){t.d(I,{MU:function(){return k},dd:function(){return Q}});var Z=t(60522),F=t(64665),z=t(23435),R=t(167),b=t(63372),N=t(49956),v=t(78537),V=t(75171),$=t(84636),U=t(50838),H=t(69514),g=t(41151),J=t(28465),Y=t(7162),G=t(35183),T=t(53370),W=t(31648),X=t(6228),n=t(67294);G.D([F.N,z.N,R.N,b.N,N.N,v.N,V.N,$.N,U.N,H.N,g.N,X.N,J.N,Y.N]);function Q(B){var S=(0,Z.Z)(B);(0,n.useEffect)(function(){var h;B.current&&((h=T.JE(B.current))===null||h===void 0||h.resize())},[S])}function k(B,S){(0,n.useEffect)(function(){if(!B.current)return;var h=T.S1(B.current);h.setOption(S);function D(){h==null||h.resize()}return window.addEventListener("resize",D),function(){h.dispose(),window.removeEventListener("resize",D)}},[])}I.ZP=W},99438:function(w,I,t){t.r(I),t.d(I,{default:function(){return h}});var Z=t(13769),F=t.n(Z),z=t(97857),R=t.n(z),b=t(5574),N=t.n(b),v=t(67294),V=t(74627),$=t(73318),U=["\u5185\u8499\u53E4\u963F\u62C9\u5584\u76DF","\u5B81\u590F\u94F6\u5DDD","\u4E91\u5357\u4E3D\u6C5F","\u4E91\u5357\u9999\u683C\u91CC\u62C9","\u897F\u85CF\u5C71\u5357","\u56DB\u5DDD\u6210\u90FD","\u6D77\u5357\u4E07\u5B81","\u8D35\u5DDE\u516D\u76D8\u6C34","\u8D35\u5DDE\u94DC\u4EC1","\u6E56\u5357\u6E58\u897F","\u4E91\u5357\u5FB7\u94A6","\u8D35\u5DDE\u9ED4\u5357","\u9752\u6D77\u897F\u5B81","\u897F\u85CF\u62C9\u8428","\u897F\u85CF\u65E5\u5580\u5219","\u9655\u897F\u897F\u5B89","\u9655\u897F\u6E2D\u5357","\u91CD\u5E86","\u56DB\u5DDD\u4E50\u5C71","\u6E56\u5357\u957F\u6C99","\u6E56\u5357\u6000\u5316","\u6E56\u5357\u5F20\u5BB6\u754C","\u6E56\u5357\u5E38\u5FB7","\u56DB\u5DDD\u963F\u575D","\u56DB\u5DDD\u7518\u5B5C","\u56DB\u5DDD\u51C9\u5C71","\u56DB\u5DDD\u5E7F\u5143","\u56DB\u5DDD\u7EF5\u9633","\u56DB\u5DDD\u7709\u5C71","\u56DB\u5DDD\u6CF8\u5DDE","\u56DB\u5DDD\u5B9C\u5BBE","\u9752\u6D77\u6D77\u4E1C","\u9752\u6D77\u6D77\u897F","\u9752\u6D77\u6D77\u5317","\u9752\u6D77\u6D77\u5357","\u6D77\u5357\u6D77\u53E3","\u4E91\u5357\u6606\u660E","\u56DB\u5DDD\u4E5D\u5BE8\u6C9F"],H=[{name:"\u5C3C\u6CCA\u5C14",lng:82.185808,lat:28.469215}],g={\u6E56\u5357\u5F20\u5BB6\u754C:{title:"\u5929\u95E8\u5C71\u4E24\u65E5",time:"2024.02.06 - 2024.02.07",name:"\u5929\u95E8\u5C71 2024.02",\u95E8\u7968:273,\u5403\u996D:111,\u9152\u5E97:123,\u4EA4\u901A:629},\u9655\u897F\u6E2D\u5357:{title:"\u534E\u5C71\u4E24\u65E5",time:"2024.03.02 - 2024.03.03",name:"\u534E\u5C71 2024.03",\u4EA4\u901A:724,\u95E8\u7968:247,\u5403\u996D:49,\u9152\u5E97:110},\u6D77\u5357\u4E07\u5B81:{title:"\u4E07\u5B81\u4E09\u65E5",time:"2024.04.04 - 2024.04.06",name:"\u4E07\u5B81 2024.04",\u5403\u996D:280.5,\u4EA4\u901A:360.5,\u9152\u5E97:417,\u673A\u7968:1900},\u5185\u8499\u53E4\u963F\u62C9\u5584\u76DF:{title:"\u817E\u683C\u91CC\u6C99\u6F20\u4E94\u65E5",time:"2024.05.02 - 2024.05.06",name:"\u817E\u683C\u91CC 2024.05",\u5403\u996D:213,\u4EA4\u901A:68,\u673A\u7968:1578,\u9152\u5E97:150,\u8DDF\u56E2:1440},\u5C3C\u6CCA\u5C14:{title:"\u5C3C\u6CCA\u5C14\u516B\u65E5",time:"2024.10.02 - 2024.10.09",name:"\u5C3C\u6CCA\u5C14 2024.10",\u8DDF\u56E2:7980,\u670D\u52A1\u8D39:1100,\u81EA\u8D39:400,\u9879\u76EE:1100},\u56DB\u5DDD\u4E5D\u5BE8\u6C9F:{title:"\u4E5D\u5BE8\u6C9F\u4E00\u65E5",time:"2024.10.19",name:"\u4E5D\u5BE8\u6C9F 2024.10",\u4EA4\u901A:389,\u5403\u996D:53,\u95E8\u7968:280}},J=t(18429),Y=t(64599),G=t.n(Y),T=t(9700),W=t(83062),X=t(41730),n=t(85893),Q=function(M){var c=(0,v.useMemo)(function(){return Object.keys(M).map(function(d){return{value:M[d],name:d}})},[M]),l=(0,v.useRef)(null),C={title:{left:"center",top:"center",text:`\u82B1\u8D39
`.concat(c.reduce(function(d,P){return d+(P==null?void 0:P.value)},0))},tooltip:{},legend:{left:"center",bottom:400},series:{type:"pie",radius:["35%","60%"],data:c,label:{show:!0,formatter:`{b}: {c}\u5143 

({d}%)`},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(200, 0, 0, 0.5)"}}}};return(0,T.dd)(l),(0,T.MU)(l,C),(0,n.jsx)("div",{className:"chart",ref:l})},k=function(M){var c=M.map,l=M.centerAndZoomMap,C=(0,v.useState)(!1),d=N()(C,2),P=d[0],u=d[1];return(0,n.jsxs)("div",{className:"tools",children:[(0,n.jsx)(W.Z,{placement:"left",title:"\u5207\u6362\u5730\u56FE\u7C7B\u578B",children:(0,n.jsx)("div",{className:"tool mapType",onClick:function(){var a=(c==null?void 0:c.getMapType())===BMAP_NORMAL_MAP?BMAP_HYBRID_MAP:BMAP_NORMAL_MAP;c==null||c.setMapType(a)},children:"\u7C7B\u578B"})}),(0,n.jsx)(W.Z,{placement:"left",title:"\u82B1\u8D39\u7EDF\u8BA1",children:(0,n.jsx)("div",{className:"tool statistic",onClick:function(){l(0),u(!0)},children:"\u7EDF\u8BA1"})}),(0,n.jsx)(W.Z,{placement:"left",title:"\u8FD4\u56DE\u9ED8\u8BA4\u5730\u56FE",children:(0,n.jsx)("div",{onClick:function(){return l(0)},className:"tool reset",children:"\u8FD4\u56DE"})}),(0,n.jsx)(B,{visible:P,setVisible:u})]})},B=function(M){var c=M.visible,l=M.setVisible,C=(0,v.useRef)(null),d=[],P=[],u=Object.values(JSON.parse(JSON.stringify(g))).reduce(function(a,s,i){var r=Object.keys(s).filter(function(o){return!["title","time"].includes(o)}),f=r.reduce(function(o,p){return o+=typeof s[p]=="number"&&p!=="\u603B\u989D"?s[p]:0},0);if(P.push([s.name,f]),i===0)a=r.map(function(o){return[o,s[o]]}),d=r;else{var e=r.filter(function(o){return!d.includes(o)});e.length&&(d=d.concat(e),e.forEach(function(o){a.push([o])}));var m=G()(r),E;try{var x=function(){var p=E.value;a.forEach(function(O){O[0]===p&&(O[i+1]=s[p])})};for(m.s();!(E=m.n()).done;)x()}catch(o){m.e(o)}finally{m.f()}}return a},[]),A={legend:{},tooltip:{trigger:"axis",confine:!0},dataset:{source:u},xAxis:{type:"category",axisLabel:{formatter:function(s){return s.split(" ").join(`

`)}}},title:{text:u[0][1].split(" ").join(`
`)+`

`+u.reduce(function(a,s){return a+=typeof s[1]=="number"?s[1]:0},0),left:"center",top:"18%"},yAxis:{gridIndex:0},grid:{top:"55%"},series:u.map(function(a,s){return s===u.length-1?{type:"pie",id:"pie",radius:["20%","30%"],center:["50%","25%"],emphasis:{focus:"self"},label:{formatter:"{b}: {@".concat(u[0][1],"} ({d}%)")},encode:{itemName:u[0][0],value:u[0][1],tooltip:u[0][1]}}:{type:"line",smooth:!0,seriesLayoutBy:"row",label:{show:!0,position:"top"},emphasis:{focus:"series"}}}).concat({type:"bar",name:"\u603B\u82B1\u8D39",data:P,barWidth:15,barGap:"20%"}),dataZoom:[{type:"inside",zoomOnMouseWheel:!0,moveOnMouseWheel:!0,moveOnMouseMove:!0}]};return(0,v.useEffect)(function(){if(!c)return;var a=T.ZP.init(C.current);a.on("updateAxisPointer",function(i){var r=i.axesInfo[0];if(r){var f=r.value+1;a.setOption({title:{text:u[0][f].split(" ").join(`
`)+`

`+u.reduce(function(e,m){return e+=typeof m[f]=="number"?m[f]:0},0),left:"center",top:"18%"},series:{id:"pie",label:{formatter:"{b}: {@["+f+"]} ({d}%)"},encode:{value:f,tooltip:f}}})}}),a.setOption(A);function s(){a==null||a.resize()}return window.addEventListener("resize",s),function(){a.dispose(),window.removeEventListener("resize",s)}},[c]),(0,n.jsx)(X.Z,{width:800,title:"\u7EDF\u8BA1",open:c,footer:!1,onCancel:function(){return l(!1)},children:(0,n.jsx)("div",{ref:C,className:"statistic-modal"})})},S=["title","time","name"];function h(){var D=(0,v.useRef)(null),M=(0,v.useState)(),c=N()(M,2),l=c[0],C=c[1],d=(0,v.useState)({}),P=N()(d,2),u=P[0],A=P[1],a=(0,v.useRef)(),s=(0,v.useCallback)(function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:500;setTimeout(function(){var r;(r=a.current)===null||r===void 0||r.call(a),A({})},i)},[]);return(0,v.useEffect)(function(){if(D.current){var i=new BMap.Map(D.current),r=new BMap.Point(109,36);i.centerAndZoom(r,6),i.enableScrollWheelZoom(),i.setMapType(BMAP_HYBRID_MAP),C(i);var f=function(){A({})};return["zoomend","dragend"].forEach(function(e){return i.addEventListener(e,f)}),function(){["zoomend","dragend"].forEach(function(e){return i.removeEventListener(e,f)})}}},[]),(0,v.useEffect)(function(){if(l){var i=new BMap.Boundary,r=[];U.forEach(function(e,m){i.get(e,function(E){if(e){var x=E.boundaries.length;if(x!==0){for(var o=[],p=0;p<x;p++){var O=new BMap.Polygon(E.boundaries[p],{strokeWeight:2,strokeStyle:"dashed",strokeColor:"#0000ff",strokeOpacity:.6,fillColor:g[e]?"rgba(200,100,55,0.7)":"rgba(0,0,255,0.5)"});o=o.concat(O),r=r.concat(O.getPath()),O.addEventListener("click",function(y){var j=y==null?void 0:y.pixel,L=j.x,K=j.y;g[e]&&A(function(q){var _=R()({},q);return _[e]={left:L,top:K,visible:!0},_})})}o.map(function(y){return l.addOverlay(y)}),m===U.length-1&&(a.current=function(){return l.setViewport(r)},s())}}})});var f=H.map(function(e){var m=e.name,E=e.lng,x=e.lat,o=new BMap.Point(E,x),p=new BMap.Marker(o);return r=r.concat([o]),p.addEventListener("click",function(){var O=l.pointToPixel(o),y=O.x,j=O.y;g[m]&&A(function(L){var K=R()({},L);return K[m]={left:y,top:j,visible:!0},K})}),p});return f.map(function(e){return l.addOverlay(e)}),function(){f.map(function(e){return l.removeOverlay(e)})}}},[l]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{id:"map",ref:D}),(0,n.jsx)(k,{map:l,centerAndZoomMap:s}),Object.keys(u).map(function(i){var r=u[i],f=r.left,e=r.top,m=r.visible,E=g[i],x=E.title,o=E.time,p=E.name,O=F()(E,S);return(0,n.jsx)(V.Z,{title:"".concat(x," (").concat(o,")"),trigger:"click",rootClassName:"popover-container",open:m,content:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)($.ZP,{className:"close-btn",shape:"circle",type:"link",danger:!0,icon:(0,n.jsx)(J.Z,{}),onClick:function(){A(function(j){var L=R()({},j);return L[i].visible=!1,L})}}),(0,n.jsx)(Q,R()({},O))]}),children:(0,n.jsx)("div",{className:"content",style:{left:f,top:e}})},i)})]})}}}]);
