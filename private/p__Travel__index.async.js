"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[63],{9700:function(tt,S,t){t.d(S,{MU:function(){return _},dd:function(){return k}});var F=t(60522),b=t(64665),z=t(23435),T=t(167),$=t(63372),I=t(49956),E=t(78537),V=t(75171),H=t(84636),Z=t(50838),J=t(69514),x=t(41151),Y=t(28465),G=t(7162),X=t(35183),W=t(53370),U=t(31648),Q=t(6228),a=t(67294);X.D([b.N,z.N,T.N,$.N,I.N,E.N,V.N,H.N,Z.N,J.N,x.N,Q.N,Y.N,G.N]);function k(j){var K=(0,F.Z)(j);(0,a.useEffect)(function(){var P;j.current&&((P=W.JE(j.current))===null||P===void 0||P.resize())},[K])}function _(j,K){(0,a.useEffect)(function(){if(!j.current)return;var P=W.S1(j.current);P.setOption(K);function g(){P==null||P.resize()}return window.addEventListener("resize",g),function(){P.dispose(),window.removeEventListener("resize",g)}},[])}S.ZP=U},99438:function(tt,S,t){t.r(S),t.d(S,{default:function(){return P}});var F=t(13769),b=t.n(F),z=t(97857),T=t.n(z),$=t(5574),I=t.n($),E=t(67294),V=t(74627),H=t(73318),Z=["\u5185\u8499\u53E4\u963F\u62C9\u5584\u76DF","\u5B81\u590F\u94F6\u5DDD","\u4E91\u5357\u4E3D\u6C5F","\u4E91\u5357\u9999\u683C\u91CC\u62C9","\u897F\u85CF\u5C71\u5357","\u56DB\u5DDD\u6210\u90FD","\u6D77\u5357\u4E07\u5B81","\u8D35\u5DDE\u516D\u76D8\u6C34","\u8D35\u5DDE\u94DC\u4EC1","\u6E56\u5357\u6E58\u897F","\u4E91\u5357\u5FB7\u94A6","\u8D35\u5DDE\u9ED4\u5357","\u9752\u6D77\u897F\u5B81","\u897F\u85CF\u62C9\u8428","\u897F\u85CF\u65E5\u5580\u5219","\u9655\u897F\u897F\u5B89","\u9655\u897F\u6E2D\u5357","\u91CD\u5E86","\u56DB\u5DDD\u4E50\u5C71","\u6E56\u5357\u957F\u6C99","\u6E56\u5357\u6000\u5316","\u6E56\u5357\u5F20\u5BB6\u754C","\u6E56\u5357\u5E38\u5FB7","\u56DB\u5DDD\u963F\u575D","\u56DB\u5DDD\u7518\u5B5C","\u56DB\u5DDD\u51C9\u5C71","\u56DB\u5DDD\u5E7F\u5143","\u56DB\u5DDD\u7EF5\u9633","\u56DB\u5DDD\u7709\u5C71","\u56DB\u5DDD\u6CF8\u5DDE","\u56DB\u5DDD\u5B9C\u5BBE","\u9752\u6D77\u6D77\u4E1C","\u9752\u6D77\u6D77\u897F","\u9752\u6D77\u6D77\u5317","\u9752\u6D77\u6D77\u5357","\u6D77\u5357\u6D77\u53E3","\u4E91\u5357\u6606\u660E","\u56DB\u5DDD\u4E5D\u5BE8\u6C9F"],J=[{name:"\u5C3C\u6CCA\u5C14",lng:82.185808,lat:28.469215}],x={\u6E56\u5357\u5F20\u5BB6\u754C:{title:"\u5929\u95E8\u5C71\u4E24\u65E5",time:"2024.02.06 - 2024.02.07",name:"\u5929\u95E8\u5C71 2024.02",\u95E8\u7968:273,\u5403\u996D:111,\u9152\u5E97:123,\u4EA4\u901A:629},\u9655\u897F\u6E2D\u5357:{title:"\u534E\u5C71\u4E24\u65E5",time:"2024.03.02 - 2024.03.03",name:"\u534E\u5C71 2024.03",\u4EA4\u901A:724,\u95E8\u7968:247,\u5403\u996D:49,\u9152\u5E97:110},\u6D77\u5357\u4E07\u5B81:{title:"\u4E07\u5B81\u4E09\u65E5",time:"2024.04.04 - 2024.04.06",name:"\u4E07\u5B81 2024.04",\u5403\u996D:280.5,\u4EA4\u901A:360.5,\u9152\u5E97:417,\u673A\u7968:1900},\u5185\u8499\u53E4\u963F\u62C9\u5584\u76DF:{title:"\u817E\u683C\u91CC\u6C99\u6F20\u4E94\u65E5",time:"2024.05.02 - 2024.05.06",name:"\u817E\u683C\u91CC 2024.05",\u5403\u996D:213,\u4EA4\u901A:68,\u673A\u7968:1578,\u9152\u5E97:150,\u8DDF\u56E2:1440},\u5C3C\u6CCA\u5C14:{title:"\u5C3C\u6CCA\u5C14\u516B\u65E5",time:"2024.10.02 - 2024.10.09",name:"\u5C3C\u6CCA\u5C14 2024.10",\u8DDF\u56E2:7980,\u670D\u52A1\u8D39:1100,\u81EA\u8D39:400,\u9879\u76EE:1100},\u56DB\u5DDD\u4E5D\u5BE8\u6C9F:{title:"\u4E5D\u5BE8\u6C9F\u4E00\u65E5",time:"2024.10.19",name:"\u4E5D\u5BE8\u6C9F 2024.10",\u4EA4\u901A:389,\u5403\u996D:53,\u95E8\u7968:280}},Y=t(18429),G=t(64599),X=t.n(G),W=t(9700),U=t(83062),Q=t(41730),a=t(85893),k=function(A){var p=(0,E.useMemo)(function(){return Object.keys(A).map(function(h){return{value:A[h],name:h}})},[A]),s=(0,E.useRef)(null),R={title:{left:"center",top:"center",text:`\u82B1\u8D39
`.concat(p.reduce(function(h,D){return h+(D==null?void 0:D.value)},0))},tooltip:{},legend:{left:"center",bottom:400},series:{type:"pie",radius:["35%","60%"],data:p,label:{show:!0,formatter:`{b}: {c}\u5143 

({d}%)`},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(200, 0, 0, 0.5)"}}}};return(0,W.dd)(s),(0,W.MU)(s,R),(0,a.jsx)("div",{className:"chart",ref:s})},_=function(A){var p=A.map,s=A.centerAndZoomMap,R=(0,E.useState)(!1),h=I()(R,2),D=h[0],d=h[1];return(0,a.jsxs)("div",{className:"tools",children:[(0,a.jsx)(U.Z,{placement:"left",title:"\u5207\u6362\u5730\u56FE\u7C7B\u578B",children:(0,a.jsx)("div",{className:"tool mapType",onClick:function(){var i=(p==null?void 0:p.getMapType())===BMAP_NORMAL_MAP?BMAP_HYBRID_MAP:BMAP_NORMAL_MAP;p==null||p.setMapType(i)},children:"\u7C7B\u578B"})}),(0,a.jsx)(U.Z,{placement:"left",title:"\u82B1\u8D39\u7EDF\u8BA1",children:(0,a.jsx)("div",{className:"tool statistic",onClick:function(){s(0),d(!0)},children:"\u7EDF\u8BA1"})}),(0,a.jsx)(U.Z,{placement:"left",title:"\u8FD4\u56DE\u9ED8\u8BA4\u5730\u56FE",children:(0,a.jsx)("div",{onClick:function(){return s(0)},className:"tool reset",children:"\u8FD4\u56DE"})}),(0,a.jsx)(j,{visible:D,setVisible:d})]})},j=function(A){var p=A.visible,s=A.setVisible,R=(0,E.useRef)(null),h=[],D=[],d=Object.values(JSON.parse(JSON.stringify(x))).reduce(function(i,c,l){var r=Object.keys(c).filter(function(o){return!["title","time"].includes(o)}),e=r.reduce(function(o,m){return o+=typeof c[m]=="number"&&m!=="\u603B\u989D"?c[m]:0},0);if(D.push([c.name,e]),l===0)i=r.map(function(o){return[o,c[o]]}),h=r;else{var n=r.filter(function(o){return!h.includes(o)});n.length&&(h=h.concat(n),n.forEach(function(o){i.push([o])}));var u=X()(r),v;try{var M=function(){var m=v.value;i.forEach(function(f){f[0]===m&&(f[l+1]=c[m])})};for(u.s();!(v=u.n()).done;)M()}catch(o){u.e(o)}finally{u.f()}}return i},[]),y={legend:{},tooltip:{trigger:"axis",confine:!0},dataset:{source:d},xAxis:{type:"category",axisLabel:{formatter:function(c){return c.split(" ").join(`

`)}}},title:{text:d[0][1].split(" ").join(`
`)+`

`+d.reduce(function(i,c){return i+=typeof c[1]=="number"?c[1]:0},0),left:"center",top:"18%"},yAxis:{gridIndex:0},grid:{top:"55%"},series:d.map(function(i,c){return c===d.length-1?{type:"pie",id:"pie",radius:["20%","30%"],center:["50%","25%"],emphasis:{focus:"self"},label:{formatter:"{b}: {@".concat(d[0][1],"} ({d}%)")},encode:{itemName:d[0][0],value:d[0][1],tooltip:d[0][1]}}:{type:"line",smooth:!0,seriesLayoutBy:"row",label:{show:!0,position:"top"},emphasis:{focus:"series"}}}).concat({type:"bar",name:"\u603B\u82B1\u8D39",data:D,barWidth:15,barGap:"20%"}),dataZoom:[{type:"inside",zoomOnMouseWheel:!0,moveOnMouseWheel:!0,moveOnMouseMove:!0}]};return(0,E.useEffect)(function(){if(!p)return;var i=W.ZP.init(R.current);i.on("updateAxisPointer",function(l){var r=l.axesInfo[0];if(r){var e=r.value+1;i.setOption({title:{text:d[0][e].split(" ").join(`
`)+`

`+d.reduce(function(n,u){return n+=typeof u[e]=="number"?u[e]:0},0),left:"center",top:"18%"},series:{id:"pie",label:{formatter:"{b}: {@["+e+"]} ({d}%)"},encode:{value:e,tooltip:e}}})}}),i.setOption(y);function c(){i==null||i.resize()}return window.addEventListener("resize",c),function(){i.dispose(),window.removeEventListener("resize",c)}},[p]),(0,a.jsx)(Q.Z,{width:800,title:"\u7EDF\u8BA1",open:p,footer:!1,onCancel:function(){return s(!1)},children:(0,a.jsx)("div",{ref:R,className:"statistic-modal"})})},K=["title","time","name"];function P(){var g=(0,E.useRef)(null),A=(0,E.useState)(),p=I()(A,2),s=p[0],R=p[1],h=(0,E.useState)({}),D=I()(h,2),d=D[0],y=D[1],i=(0,E.useRef)(),c=(0,E.useCallback)(function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:500;setTimeout(function(){var r;(r=i.current)===null||r===void 0||r.call(i),y({})},l)},[]);return(0,E.useEffect)(function(){if(g.current){var l=new BMap.Map(g.current),r=new BMap.Point(109,36);l.centerAndZoom(r,6),l.enableScrollWheelZoom(),l.setMapType(BMAP_HYBRID_MAP),R(l);var e=function(){y({})};return["zoomend","dragend"].forEach(function(n){return l.addEventListener(n,e)}),function(){["zoomend","dragend"].forEach(function(n){return l.removeEventListener(n,e)})}}},[]),(0,E.useEffect)(function(){if(s){var l=new BMap.Boundary,r=[];fetch("./geojson/nepal-states.geojson").then(function(e){return e==null?void 0:e.json()}).then(function(e){var n=e.features;if(Array.isArray(n)&&n!==null&&n!==void 0&&n.length){var u=[];return n.forEach(function(v){var M=v.geometry,o=M===void 0?{}:M,m=o.coordinates,f=m===void 0?[]:m,L=f==null?void 0:f.map(function(O){var B=I()(O,2),N=B[0],w=B[1];return new BMap.Point(N,w)}),C=new BMap.Polygon(L,{strokeWeight:2,strokeStyle:"dashed",strokeColor:"#0000ff",strokeOpacity:.6,fillColor:"rgba(200,100,55,0.7)"});u=u.concat(C),r=r.concat(C.getPath()),C.addEventListener("click",function(O){var B=O==null?void 0:O.pixel,N=B.x,w=B.y;x.\u5C3C\u6CCA\u5C14&&y(function(et){var q=T()({},et);return q.\u5C3C\u6CCA\u5C14={left:N,top:w,visible:!0},q})})}),u.map(function(v){return s.addOverlay(v)}),function(){u.map(function(v){return s.removeOverlay(v)})}}}).catch(function(){var e=J.map(function(n){var u=n.name,v=n.lng,M=n.lat,o=new BMap.Point(v,M),m=new BMap.Marker(o);return r=r.concat([o]),m.addEventListener("click",function(){var f=s.pointToPixel(o),L=f.x,C=f.y;x[u]&&y(function(O){var B=T()({},O);return B[u]={left:L,top:C,visible:!0},B})}),m});return e.map(function(n){return s.addOverlay(n)}),function(){e.map(function(n){return s.removeOverlay(n)})}}),Z.forEach(function(e,n){l.get(e,function(u){if(e){var v=u.boundaries.length;if(v!==0){for(var M=[],o=0;o<v;o++){var m=new BMap.Polygon(u.boundaries[o],{strokeWeight:2,strokeStyle:"dashed",strokeColor:"#0000ff",strokeOpacity:.6,fillColor:x[e]?"rgba(200,100,55,0.7)":"rgba(0,0,255,0.5)"});M=M.concat(m),r=r.concat(m.getPath()),m.addEventListener("click",function(f){var L=f==null?void 0:f.pixel,C=L.x,O=L.y;x[e]&&y(function(B){var N=T()({},B);return N[e]={left:C,top:O,visible:!0},N})})}return M.map(function(f){return s.addOverlay(f)}),n===Z.length-1&&(i.current=function(){return s.setViewport(r)},c()),function(){M.map(function(f){return s.removeOverlay(f)})}}}})})}},[s]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{id:"map",ref:g}),(0,a.jsx)(_,{map:s,centerAndZoomMap:c}),Object.keys(d).map(function(l){var r=d[l],e=r.left,n=r.top,u=r.visible,v=x[l],M=v.title,o=v.time,m=v.name,f=b()(v,K);return(0,a.jsx)(V.Z,{title:"".concat(M," (").concat(o,")"),trigger:"click",rootClassName:"popover-container",open:u,content:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(H.ZP,{className:"close-btn",shape:"circle",type:"link",danger:!0,icon:(0,a.jsx)(Y.Z,{}),onClick:function(){y(function(C){var O=T()({},C);return O[l].visible=!1,O})}}),(0,a.jsx)(k,T()({},f))]}),children:(0,a.jsx)("div",{className:"content",style:{left:e,top:n}})},l)})]})}}}]);
