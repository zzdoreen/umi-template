"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[63],{9700:function(_,g,t){t.d(g,{MU:function(){return Y},dd:function(){return J}});var S=t(60522),U=t(64665),K=t(23435),R=t(167),Z=t(63372),j=t(49956),f=t(78537),F=t(75171),z=t(84636),L=t(50838),x=t(69514),b=t(41151),V=t(28465),H=t(7162),T=t(35183),y=t(53370),$=t(31648),e=t(6228),N=t(67294);T.D([U.N,K.N,R.N,Z.N,j.N,f.N,F.N,z.N,L.N,x.N,b.N,e.N,V.N,H.N]);function J(D){var I=(0,S.Z)(D);(0,N.useEffect)(function(){var c;D.current&&((c=y.JE(D.current))===null||c===void 0||c.resize())},[I])}function Y(D,I){(0,N.useEffect)(function(){if(!D.current)return;var c=y.S1(D.current);c.setOption(I);function v(){c==null||c.resize()}return window.addEventListener("resize",v),function(){c.dispose(),window.removeEventListener("resize",v)}},[])}g.ZP=$},99438:function(_,g,t){t.r(g),t.d(g,{default:function(){return I}});var S=t(13769),U=t.n(S),K=t(97857),R=t.n(K),Z=t(5574),j=t.n(Z),f=t(67294),F=t(74627),z=t(14726),L=["\u5185\u8499\u53E4\u963F\u62C9\u5584\u76DF","\u5B81\u590F\u94F6\u5DDD","\u4E91\u5357\u4E3D\u6C5F","\u4E91\u5357\u9999\u683C\u91CC\u62C9","\u897F\u85CF\u5C71\u5357","\u56DB\u5DDD\u6210\u90FD","\u6D77\u5357\u4E07\u5B81","\u8D35\u5DDE\u516D\u76D8\u6C34","\u8D35\u5DDE\u94DC\u4EC1","\u6E56\u5357\u6E58\u897F","\u4E91\u5357\u5FB7\u94A6","\u8D35\u5DDE\u9ED4\u5357","\u9752\u6D77\u897F\u5B81","\u897F\u85CF\u62C9\u8428","\u897F\u85CF\u65E5\u5580\u5219","\u9655\u897F\u897F\u5B89","\u9655\u897F\u6E2D\u5357","\u91CD\u5E86","\u56DB\u5DDD\u4E50\u5C71","\u6E56\u5357\u957F\u6C99","\u6E56\u5357\u6000\u5316","\u6E56\u5357\u5F20\u5BB6\u754C","\u6E56\u5357\u5E38\u5FB7","\u56DB\u5DDD\u963F\u575D","\u56DB\u5DDD\u7518\u5B5C","\u56DB\u5DDD\u51C9\u5C71","\u56DB\u5DDD\u5E7F\u5143","\u56DB\u5DDD\u7EF5\u9633","\u56DB\u5DDD\u7709\u5C71","\u56DB\u5DDD\u6CF8\u5DDE","\u56DB\u5DDD\u5B9C\u5BBE","\u9752\u6D77\u6D77\u4E1C","\u9752\u6D77\u6D77\u897F","\u9752\u6D77\u6D77\u5317","\u9752\u6D77\u6D77\u5357","\u6D77\u5357\u6D77\u53E3","\u4E91\u5357\u6606\u660E"],x={\u6E56\u5357\u5F20\u5BB6\u754C:{title:"\u5929\u95E8\u5C71\u4E24\u65E5",time:"2024.02.06 - 2024.02.07",name:"\u5929\u95E8\u5C71 2024.02",\u95E8\u7968:273,\u5403\u996D:111,\u9152\u5E97:123,\u4EA4\u901A:629},\u9655\u897F\u6E2D\u5357:{title:"\u534E\u5C71\u4E24\u65E5",time:"2024.03.02 - 2024.03.03",name:"\u534E\u5C71 2024.03",\u4EA4\u901A:724,\u95E8\u7968:247,\u5403\u996D:49,\u9152\u5E97:110},\u6D77\u5357\u4E07\u5B81:{title:"\u4E07\u5B81\u4E09\u65E5",time:"2024.04.04 - 2024.04.06",name:"\u4E07\u5B81 2024.04",\u5403\u996D:280.5,\u4EA4\u901A:360.5,\u9152\u5E97:417,\u673A\u7968:1900},\u5185\u8499\u53E4\u963F\u62C9\u5584\u76DF:{title:"\u817E\u683C\u91CC\u6C99\u6F20\u4E94\u65E5",time:"2024.05.02 - 2024.05.06",name:"\u817E\u683C\u91CC 2024.05",\u5403\u996D:213,\u4EA4\u901A:68,\u673A\u7968:1578,\u9152\u5E97:150,\u8DDF\u56E2:1440}},b=t(18429),V=t(64599),H=t.n(V),T=t(9700),y=t(83062),$=t(41730),e=t(85893),N=function(v){var u=(0,f.useMemo)(function(){return Object.keys(v).map(function(m){return{value:v[m],name:m}})},[v]),d=(0,f.useRef)(null),B={title:{left:"center",top:"center",text:`\u82B1\u8D39
`.concat(u.reduce(function(m,h){return m+(h==null?void 0:h.value)},0))},tooltip:{},legend:{left:"center",bottom:400},series:{type:"pie",radius:["35%","60%"],data:u,label:{show:!0,formatter:`{b}: {c}\u5143 

({d}%)`},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(200, 0, 0, 0.5)"}}}};return(0,T.dd)(d),(0,T.MU)(d,B),(0,e.jsx)("div",{className:"chart",ref:d})},J=function(v){var u=v.map,d=v.centerAndZoomMap,B=(0,f.useState)(!1),m=j()(B,2),h=m[0],l=m[1];return(0,e.jsxs)("div",{className:"tools",children:[(0,e.jsx)(y.Z,{placement:"left",title:"\u5207\u6362\u5730\u56FE\u7C7B\u578B",children:(0,e.jsx)("div",{className:"tool mapType",onClick:function(){var n=(u==null?void 0:u.getMapType())===BMAP_NORMAL_MAP?BMAP_HYBRID_MAP:BMAP_NORMAL_MAP;u==null||u.setMapType(n)},children:"\u7C7B\u578B"})}),(0,e.jsx)(y.Z,{placement:"left",title:"\u82B1\u8D39\u7EDF\u8BA1",children:(0,e.jsx)("div",{className:"tool statistic",onClick:function(){d(0),l(!0)},children:"\u7EDF\u8BA1"})}),(0,e.jsx)(y.Z,{placement:"left",title:"\u8FD4\u56DE\u9ED8\u8BA4\u5730\u56FE",children:(0,e.jsx)("div",{onClick:function(){return d(0)},className:"tool reset",children:"\u8FD4\u56DE"})}),(0,e.jsx)(Y,{visible:h,setVisible:l})]})},Y=function(v){var u=v.visible,d=v.setVisible,B=(0,f.useRef)(null),m=[],h=[],l=Object.values(JSON.parse(JSON.stringify(x))).reduce(function(n,o,a){var r=Object.keys(o).filter(function(i){return!["title","time"].includes(i)}),s=r.reduce(function(i,M){return i+=typeof o[M]=="number"&&M!=="\u603B\u989D"?o[M]:0},0);if(h.push([o.name,s]),a===0)n=r.map(function(i){return[i,o[i]]}),m=r;else{var E=r.filter(function(i){return!m.includes(i)});E.length&&(m=m.concat(E),E.forEach(function(i){n.push([i])}));var p=H()(r),O;try{var C=function(){var M=O.value;n.forEach(function(P){P[0]===M&&(P[a+1]=o[M])})};for(p.s();!(O=p.n()).done;)C()}catch(i){p.e(i)}finally{p.f()}}return n},[]),A={legend:{},tooltip:{trigger:"axis",confine:!0},dataset:{source:l},xAxis:{type:"category",axisLabel:{formatter:function(o){return o.split(" ").join(`

`)}}},title:{text:l[0][1].split(" ").join(`
`)+`

`+l.reduce(function(n,o){return n+=typeof o[1]=="number"?o[1]:0},0),left:"center",top:"18%"},yAxis:{gridIndex:0},grid:{top:"55%"},series:l.map(function(n,o){return o===l.length-1?{type:"pie",id:"pie",radius:["20%","30%"],center:["50%","25%"],emphasis:{focus:"self"},label:{formatter:"{b}: {@".concat(l[0][1],"} ({d}%)")},encode:{itemName:l[0][0],value:l[0][1],tooltip:l[0][1]}}:{type:"line",smooth:!0,seriesLayoutBy:"row",label:{show:!0,position:"top"},emphasis:{focus:"series"}}}).concat({type:"bar",name:"\u603B\u82B1\u8D39",data:h,barWidth:15,barGap:"20%"}),dataZoom:[{type:"inside",zoomOnMouseWheel:!0,moveOnMouseWheel:!0,moveOnMouseMove:!0}]};return(0,f.useEffect)(function(){if(!u)return;var n=T.ZP.init(B.current);n.on("updateAxisPointer",function(a){var r=a.axesInfo[0];if(r){var s=r.value+1;n.setOption({title:{text:l[0][s].split(" ").join(`
`)+`

`+l.reduce(function(E,p){return E+=typeof p[s]=="number"?p[s]:0},0),left:"center",top:"18%"},series:{id:"pie",label:{formatter:"{b}: {@["+s+"]} ({d}%)"},encode:{value:s,tooltip:s}}})}}),n.setOption(A);function o(){n==null||n.resize()}return window.addEventListener("resize",o),function(){n.dispose(),window.removeEventListener("resize",o)}},[u]),(0,e.jsx)($.Z,{width:800,title:"\u7EDF\u8BA1",open:u,footer:!1,onCancel:function(){return d(!1)},children:(0,e.jsx)("div",{ref:B,className:"statistic-modal"})})},D=["title","time","name"];function I(){var c=(0,f.useRef)(null),v=(0,f.useState)(),u=j()(v,2),d=u[0],B=u[1],m=(0,f.useState)({}),h=j()(m,2),l=h[0],A=h[1],n=(0,f.useRef)(),o=(0,f.useCallback)(function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:500;setTimeout(function(){var r;(r=n.current)===null||r===void 0||r.call(n),A({})},a)},[]);return(0,f.useEffect)(function(){if(c.current){var a=new BMap.Map(c.current),r=new BMap.Point(109,36);a.centerAndZoom(r,6),a.enableScrollWheelZoom(),a.setMapType(BMAP_HYBRID_MAP),B(a);var s=function(){A({})};return["zoomend","dragend"].forEach(function(E){return a.addEventListener(E,s)}),function(){["zoomend","dragend"].forEach(function(E){return a.removeEventListener(E,s)})}}},[]),(0,f.useEffect)(function(){if(d){var a=new BMap.Boundary,r=[];L.forEach(function(s,E){a.get(s,function(p){if(s){var O=p.boundaries.length;if(O!==0){for(var C=[],i=0;i<O;i++){var M=new BMap.Polygon(p.boundaries[i],{strokeWeight:2,strokeStyle:"dashed",strokeColor:"#0000ff",strokeOpacity:.6,fillColor:x[s]?"rgba(200,100,55,0.7)":"rgba(0,0,255,0.5)"});C=C.concat(M),r=r.concat(M.getPath()),M.addEventListener("click",function(P){var G=P==null?void 0:P.pixel,X=G.x,W=G.y;x[s]&&A(function(k){var Q=R()({},k);return Q[s]={left:X,top:W,visible:!0},Q})})}C.map(function(P){return d.addOverlay(P)}),E===L.length-1&&(n.current=function(){return d.setViewport(r)},o())}}})})}},[d]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{id:"map",ref:c}),(0,e.jsx)(J,{map:d,centerAndZoomMap:o}),Object.keys(l).map(function(a){var r=l[a],s=r.left,E=r.top,p=r.visible,O=x[a],C=O.title,i=O.time,M=O.name,P=U()(O,D);return(0,e.jsx)(F.Z,{title:"".concat(C," (").concat(i,")"),trigger:"click",rootClassName:"popover-container",open:p,content:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(z.ZP,{className:"close-btn",shape:"circle",type:"link",danger:!0,icon:(0,e.jsx)(b.Z,{}),onClick:function(){A(function(X){var W=R()({},X);return W[a].visible=!1,W})}}),(0,e.jsx)(N,R()({},P))]}),children:(0,e.jsx)("div",{className:"content",style:{left:s,top:E}})},a)})]})}}}]);
