(self.webpackChunk=self.webpackChunk||[]).push([[311],{75346:function(sn,oe,s){"use strict";s.r(oe),s.d(oe,{default:function(){return ln}});var me=s(97857),j=s.n(me),he=s(5574),D=s.n(he),pe=s(97462),ge=s(64317),xe=s(90672),T=s(14726),w=s(2453),b=s(67294),Ce=s(9783),Fe=s.n(Ce),ye=s(13769),W=s.n(ye),be=s(19632),le=s.n(be),je=s(68795),Se=s(24969),ue=s(16894),ie=s(28248),J=s(71230),Pe=s(15746),Te=s(93967),Ae=s.n(Te),Ee=s(30381),H=s.n(Ee),se={table:"table___Im2wl",modal:"modal___ch0td",form:"form___owcUY"},Q=s(92210),r=s(85893),Ie=["onSubmit","modal","setModal","hasRestFooter","refreshTime","modelProps","onCancel"],ke=["searchSpan","extraActions","addText","addButtonProps","hideSearchButton","className","actionRef","setModal"],De={title:"\u5E8F\u53F7",valueType:"index",key:"index",width:100,render:function(n,o,u,c){var v=c.pageInfo,g=v===void 0?{}:v,h=g.pageSize,F=h===void 0?0:h,f=g.current,m=f===void 0?1:f;return(0,r.jsx)("div",{style:{padding:"5px 0"},children:m*F+u+1-F})}};function Ze(e){var n=e.columns,o=e.request,u=e.showIndexColumn,c=u===void 0?!0:u,v=(0,b.useMemo)(function(){return(c?[De].concat(le()(n)):n).map(function(t){return(0,Q.T)({align:t.valueType==="option"?"center":void 0,fieldProps:{allowClear:t.valueType!=="digit"?!0:void 0,placeholder:null},filters:void 0},t)})},[n]),g=(0,b.useRef)(),h=(0,b.useCallback)(function(t){var p;return(p=g.current)===null||p===void 0?void 0:p.reload(t)},[g]),F=(0,b.useState)({visible:!1}),f=D()(F,2),m=f[0],C=f[1];return{setModal:C,modal:m,reload:h,proTableProps:{request:o,columns:v,setModal:C,actionRef:g,rowKey:"id"},proFormModalProps:{modal:m,setModal:C,columns:v}}}function Re(e){var n=e.onSubmit,o=e.modal,u=e.setModal,c=e.hasRestFooter,v=c===void 0?!1:c,g=e.refreshTime,h=g===void 0?{flag:!1,name:"createdAt"}:g,F=e.modelProps,f=e.onCancel,m=f===void 0?!1:f,C=W()(e,Ie),t=(0,b.useRef)();(0,b.useEffect)(function(){var a=null,d=o.isAdd,x=o.visible,P=o.title;return(d||P==="\u5904\u7406")&&h.flag&&x&&(a=setInterval(function(){var R,L;return(R=t.current)===null||R===void 0?void 0:R.setFieldsValue(j()(j()({},(L=t.current)===null||L===void 0?void 0:L.getFieldsValue()),{},Fe()({},h==null?void 0:h.name,H()())))},1e3)),function(){a&&clearInterval(a)}},[o.visible,o.isAdd,h,o.title]),(0,b.useEffect)(function(){u(function(a){return j()(j()({},a),{},{isAdd:!o.defaultFormValues})})},[o.visible,o.defaultFormValues]),(0,b.useEffect)(function(){var a=o.visible,d=o.defaultFormValues;if(a){var x,P;(x=t.current)===null||x===void 0||x.resetFields(),d&&((P=t.current)===null||P===void 0||P.setFieldsValue(d))}},[o.visible,o.defaultFormValues]);var p=(0,b.useMemo)(function(){return(0,Q.T)({form:{layout:"horizontal",labelCol:{span:6},submitter:!1}},C)},[C]),y=(0,b.useState)(!1),S=D()(y,2),i=S[0],l=S[1];return(0,r.jsx)(ie.Z,j()(j()(j()({visible:o.visible,title:o.title,className:se.modal,onCancel:function(){var d,x;m&&m((d=t.current)===null||d===void 0?void 0:d.getFieldsValue()),(x=t.current)===null||x===void 0||x.setFieldsValue({file:[]}),u({visible:!1})},forceRender:!0,maskClosable:!1,onOk:function(){var d;return(d=t.current)===null||d===void 0?void 0:d.validateFields().then(function(x){return l(!0),n==null?void 0:n(x)}).finally(function(){return l(!1)})},okButtonProps:{loading:i}},v&&{footer:[(0,r.jsx)(T.ZP,{onClick:function(){var d;return(d=t.current)===null||d===void 0?void 0:d.setFieldsValue(j()(j()({},o.defaultFormValues),{},{content:"",result:""}))},children:"\u91CD\u7F6E"},"reset"),(0,r.jsx)(T.ZP,{type:"primary",onClick:function(){var d;return(d=t.current)===null||d===void 0?void 0:d.validateFields().then(function(x){return l(!0),n==null?void 0:n(x)}).finally(function(){return l(!1)})},children:"\u4FDD\u5B58"},"submit")]}),F),{},{children:(0,r.jsx)(ue.ZP,j()({type:"form",formRef:t},p))}))}function Le(e){var n=e.searchSpan,o=n===void 0?6:n,u=e.extraActions,c=e.addText,v=e.addButtonProps,g=e.hideSearchButton,h=e.className,F=e.actionRef,f=e.setModal,m=W()(e,ke),C=(0,Q.T)({options:!1,toolBarRender:!1,actionRef:F,pagination:{size:"default",defaultPageSize:10,showSizeChanger:!0},className:Ae()(se.table,h),search:{span:o,optionRender:function(p,y,S){return(0,r.jsxs)(J.Z,{justify:"space-between",children:[g?(0,r.jsx)("span",{}):b.cloneElement(S[1],{icon:(0,r.jsx)(je.Z,{})}),(0,r.jsxs)(Pe.Z,{children:[c&&(0,r.jsx)(T.ZP,j()(j()({type:"primary",icon:(0,r.jsx)(Se.Z,{}),onClick:function(){return f({visible:!0,title:c})}},v),{},{children:c})),u]})]})}}},m);return(0,r.jsx)(ue.ZP,j()({},C))}var dn=s(15009),cn=s(99289),Y=s(23089),fn=s(43281),M=s(80854),Be=["current","pageSize","_timestamp"];function de(e,n){return(0,M.request)(e,{method:"POST",data:n})}function ce(e,n){return(0,M.request)(e,{method:"GET",params:n})}function Ue(e,n){return(0,M.request)(e,{method:"PUT",data:n})}function we(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,M.request)(e,{method:"DELETE",params:n})}function vn(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return request(e,{method:"DELETE",data:n})}function Ne(e,n){return function(o){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},v=o.current,g=o.pageSize,h=o._timestamp,F=W()(o,Be);return e(j()(j()({pageNum:v,pageSize:g},F),(0,Y.aB)(u))).then(function(f){var m=f.code,C=f.message,t=f.data;m!==0&&n&&n(C);var p=[],y=0;return Array.isArray(t)||!t?(p=t||[],y=p.length):(p=t.list||[],y=t.total||0),{data:p,total:y,success:m===0}})}}function mn(e,n){return function(o){return e(o).then(function(u){var c=u.code,v=u.data;return c===0?n?v.map(n):v:[]})}}var X;function hn(){return q.apply(this,arguments)}function q(){return q=_asyncToGenerator(_regeneratorRuntime().mark(function e(){return _regeneratorRuntime().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!X){o.next=2;break}return o.abrupt("return",X);case 2:return o.abrupt("return",protobuf.load("/protobuf/deliver.proto").then(function(u){var c=u.lookupType("deliver.Authentication"),v=u.lookupType("deliver.Consequence"),g=u.lookupType("deliver.Heartbeat"),h=u.lookupType("deliver.Warning"),F=u.lookupType("deliver.Rain"),f=u.lookupType("deliver.Control"),m=u.lookupType("deliver.Rainfall"),C=u.lookupType("deliver.Judge"),t=u.lookupType("deliver.CalEarlywarning");return X={Authentication:c,Consequence:v,Heartbeat:g,Warning:h,Control:f,Rain:F,Rainfall:m,Judge:C,Earthquake:t}}));case 3:case"end":return o.stop()}},e)})),q.apply(this,arguments)}function Me(e){return ce("/v1/device/list",e)}function Oe(e){var n=new FormData;return n.append("file",e),de("/import",n)}function Ve(e){return ce("/export",e)}function $e(e){return de("/device",e)}function ze(e){return Ue("/device",e)}function Ge(e){return we("/device",{ids:e})}var We=s(50888),_=s(2058),ee=s(2487),V=s(35001),He=s(74330),$=s(51459),ne={start:"start___IX6wS",loading:"loading___Uwu4z",end:"end___py0oA"};function Ye(e){var n=e.template,o=e.service,u=e.name,c=e.reload,v=e.tootip,g=e.accept,h=g===void 0?".xls,.xlsx":g,F=e.validator,f=(0,b.useState)(!1),m=D()(f,2),C=m[0],t=m[1],p=(0,b.useState)(A.START),y=D()(p,2),S=y[0],i=y[1],l=(0,b.useState)({success:0,failed:[]}),a=D()(l,2),d=a[0],x=a[1],P=(0,b.useState)([]),R=D()(P,2),L=R[0],N=R[1],O=(0,b.useRef)(),re=(0,b.useCallback)(function(k,U){return U&&!U(k)?_.Z.LIST_IGNORE:(O.current=k,!1)},[]),z=(0,b.useCallback)(function(){if(!O.current)return w.ZP.error("\u8BF7\u9009\u62E9\u6587\u4EF6\uFF01");i(A.LOADING),o(O.current).then(function(k){var U=k.code,ae=k.data,un=k.message;if(U!==0)throw un;x(ae),i(A.END)}).catch(function(k){w.ZP.error(k||"\u5BFC\u5165\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),i(A.START)})},[]),B=(0,b.useCallback)(function(){S===A.END&&(c==null||c(!0)),i(A.START),N([]),O.current=void 0,t(!1)},[S]),Z,E;if(S===A.START)Z=(0,r.jsxs)(ee.Z,{className:ne.start,children:[(0,r.jsx)(J.Z,{className:"title",children:"\u8BF7\u6309\u6A21\u677F\u6807\u51C6\u683C\u5F0F\u5BFC\u5165\u6570\u636E"}),(0,r.jsx)(J.Z,{className:"template-link",children:(0,r.jsx)(V.Z.Link,{href:n,download:!0,children:"\u4E0B\u8F7D\u5BFC\u5165\u6A21\u677F"})}),(0,r.jsx)(_.Z,{beforeUpload:function(U){return re(U,F)},accept:h,showUploadList:{showRemoveIcon:!1},fileList:L,onChange:function(U){var ae=U.fileList;return N(ae.slice(-1))},children:(0,r.jsx)(T.ZP,{type:"primary",ghost:!0,children:"\u9009\u62E9\u6587\u4EF6"})}),(0,r.jsx)("span",{className:"tooltip",children:v})]}),E=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T.ZP,{onClick:B,children:"\u53D6\u6D88"}),(0,r.jsx)(T.ZP,{onClick:z,type:"primary",children:"\u5BFC\u5165"})]});else if(S===A.LOADING)Z=(0,r.jsx)(ee.Z,{className:ne.loading,children:(0,r.jsx)(He.Z,{indicator:(0,r.jsx)(We.Z,{style:{fontSize:40},spin:!0}),tip:"\u5BFC\u5165\u4E2D"})}),E=null;else{var I=d,G=I.success,K=I.failed;Z=(0,r.jsxs)(ee.Z,{className:ne.end,children:[(0,r.jsxs)(V.Z,{children:["\u5BFC\u5165\u5B8C\u6210\uFF0C\u5B8C\u6210",(0,r.jsx)(V.Z.Text,{style:{padding:"0 4px"},strong:!0,children:G}),"\u6761\uFF0C\u5931\u8D25",(0,r.jsx)(V.Z.Text,{style:{padding:"0 4px"},strong:!0,type:K.length?"danger":void 0,children:K.length}),"\u6761"]}),K.length>0&&(0,r.jsx)(V.Z.Link,{onClick:function(){return Ke(K,u)},children:"\u4E0B\u8F7D\u5931\u8D25\u65E5\u5FD7"})]}),E=(0,r.jsx)(T.ZP,{onClick:B,type:"primary",children:"\u786E\u5B9A"})}return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{onClick:function(){return t(!0)},children:e.children}),(0,r.jsx)(ie.Z,{title:"\u5BFC\u5165".concat(u),visible:C,maskClosable:!1,footer:E,onCancel:B,children:Z})]})}var A=function(e){return e[e.START=0]="START",e[e.LOADING=1]="LOADING",e[e.END=2]="END",e}(A||{});function Ke(e,n){var o=[["\u884C\u53F7","\u5931\u8D25\u539F\u56E0"]],u=$.utils.aoa_to_sheet(o),c=$.utils.sheet_add_aoa(u,e.map(function(g){var h=g.index,F=g.reason;return[h,F]}),{origin:"A2"}),v=$.utils.book_new();$.utils.book_append_sheet(v,c),(0,$.writeFile)(v,"".concat(n,"\u5BFC\u5165\u5931\u8D25\u65E5\u5FD7").concat(H()().format("YYYYMMDDHHmmss"),".xlsx"))}function pn(e){var n=e.service,o=e.name,u=e.reload,c=e.tootip,v=e.accept,g=v===void 0?".xls,.xlsx":v,h=e.validator,F=useState(!1),f=_slicedToArray(F,2),m=f[0],C=f[1],t=useState(A.START),p=_slicedToArray(t,2),y=p[0],S=p[1],i=useState(!1),l=_slicedToArray(i,2),a=l[0],d=l[1],x=useState([]),P=_slicedToArray(x,2),R=P[0],L=P[1],N=useRef(),O=useCallback(function(E,I){return I&&!I(E)?Upload.LIST_IGNORE:(N.current=E,!1)},[]),re=useCallback(function(){if(!N.current)return message.error("\u8BF7\u9009\u62E9\u6587\u4EF6\uFF01");S(A.LOADING),n(N.current).then(function(E){var I=E.code,G=E.message;if(d(I===0),I!==0)throw G;S(A.END)}).catch(function(E){message.error(E||"\u5BFC\u5165\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),S(A.START)})},[]),z=useCallback(function(){y===A.END&&(u==null||u()),S(A.START),L([]),N.current=void 0,C(!1)},[y]),B,Z;return y===A.START?(B=_jsxs(List,{className:style.start,children:[_jsx(Upload,{beforeUpload:function(I){return O(I,h)},accept:g,fileList:R,onChange:function(I){var G=I.fileList;return L(G.slice(-1))},children:_jsx(Button,{type:"primary",ghost:!0,children:"\u9009\u62E9\u6587\u4EF6"})}),_jsx("span",{className:"tooltip",children:c})]}),Z=_jsxs(_Fragment,{children:[_jsx(Button,{onClick:z,children:"\u53D6\u6D88"}),_jsx(Button,{onClick:re,type:"primary",children:"\u5BFC\u5165"})]})):y===A.LOADING?(B=_jsx(List,{className:style.loading,children:_jsx(Spin,{indicator:_jsx(LoadingOutlined,{style:{fontSize:40},spin:!0}),tip:"\u4E0A\u4F20\u4E2D"})}),Z=null):(B=_jsx(List,{className:style.end,children:_jsx(Typography,{children:a?"\u4E0A\u4F20\u5B8C\u6210":"\u4E0A\u4F20\u5931\u8D25"})}),Z=_jsx(Button,{onClick:z,type:"primary",children:"\u786E\u5B9A"})),_jsxs(_Fragment,{children:[_jsx("span",{onClick:function(){return C(!0)},children:e.children}),_jsx(Modal,{title:"\u4E0A\u4F20".concat(o),visible:m,maskClosable:!1,footer:Z,onCancel:z,children:B})]})}var fe=s(40488),gn=s(82492),Je={"upload-image":"upload-image___CcnOj","upload-file":"upload-file___kQOCm"},Qe=null,Xe=["value","onChange","onlyShowName","downloadLink"],qe=null;function _e(e){return Promise.resolve({code:0,message:"",data:e})}var xn=function(n){var o=useState(!1),u=_slicedToArray(o,2),c=u[0],v=u[1],g=useDebounceFn(function(t){return v(!!t)},{wait:200}),h=g.run,F=useMemo(function(){return merge({formItemProps:{normalize:function(p){var y;return(y=p[0])===null||y===void 0?void 0:y.originFileObj},getValueProps:function(p){return h(p),typeof p=="string"?{fileList:[{name:p}]}:p?{fileList:[p]}:void 0},getValueFromEvent:function(p){var y=p.fileList;return y}}},n)},[n]),f=F.formItemProps,m=F.fieldProps,C=_objectWithoutProperties(F,Qe);return _jsx(Form.Item,_objectSpread(_objectSpread(_objectSpread({},C),f),{},{className:styles["upload-file"],children:_jsx(Upload,_objectSpread(_objectSpread({},m),{},{beforeUpload:function(){return!1},maxCount:1,showUploadList:c?{showPreviewIcon:!1}:!1,children:_jsx(Button,{children:"\u4E0A\u4F20\u6587\u4EF6"})}))}))},Cn=null,en=function(n){var o=n.value,u=n.onChange,c=n.onlyShowName,v=n.downloadLink,g=W()(n,Xe),h=(0,fe.Z)({value:o,onChange:u}),F=D()(h,2),f=F[0],m=F[1],C=(0,b.useMemo)(function(){return typeof f=="string"?[{name:f}]:f?[f]:void 0},[f]);return c?(0,r.jsx)("span",{children:o}):(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,r.jsx)(_.Z,j()(j()({},g),{},{fileList:C,beforeUpload:function(){return!1},className:Je["upload-file"],onChange:function(p){var y,S=p.fileList;return m((y=S[0])===null||y===void 0?void 0:y.originFileObj)},maxCount:1,showUploadList:{showPreviewIcon:!1},children:(0,r.jsx)(T.ZP,{children:"\u4E0A\u4F20\u6587\u4EF6"})})),(0,r.jsx)(M.Access,{accessible:!!(v&&f),children:(0,r.jsx)(T.ZP,{type:"link",href:v,target:"_blank",children:"\u4E0B\u8F7D\u9644\u4EF6"})})]})},Fn=function(n){var o=n.value,u=n.onChange,c=n.maxCount,v=n.batchDownloadFlag,g=v===void 0?!1:v,h=_objectWithoutProperties(n,qe),F=useControllableValue({value:o,onChange:u}),f=_slicedToArray(F,2),m=f[0],C=f[1],t=useMemo(function(){return m?m.map(function(i){return typeof i=="string"?_objectSpread(_objectSpread({name:tn(i),uid:Math.random(),url:te(i)},i.includes(";")?{fileUrl:i}:{}),{},{status:"done"}):i}):void 0},[m]),p=useCallback(function(i){var l=i.url,a=i.name;return l?nn(l,a):message.error("\u6587\u4EF6\u83B7\u53D6\u5931\u8D25")},[]),y=function(){t!=null&&t.length&&t.forEach(function(l){var a=l.url,d=l.name,x=document.createElement("iframe");x.style.display="none";var P=document.createElement("a");P.href=window.location.origin+a,P.type="download",P.download=d,x.appendChild(P),P.click(),document.body.appendChild(x),setTimeout(function(){x.remove()},10*60*1e3)})},S=function(l){return C(l==null?void 0:l.map(function(a){var d,x;return a.url?a:{response:a.response,status:(a==null||(d=a.response)===null||d===void 0?void 0:d.code)===0?"done":"error",uid:a.uid,name:a.name,url:a==null||(x=a.response)===null||x===void 0?void 0:x.data}}))};return _jsxs("div",{style:{position:"relative"},children:[_jsx(Upload,_objectSpread(_objectSpread(_objectSpread({},h),{},{headers:{Authorization:"Bearer "+getLocalStorage("token")},fileList:t},c?{maxCount:c}:{}),{},{beforeUpload:function(){var l,a=(l=t==null?void 0:t.length)!==null&&l!==void 0?l:0;return c&&c<=a?(message.info("\u6700\u591A\u4E0A\u4F20".concat(c,"\u4E2A")),!1):!0},onChange:function(l){var a=l.fileList;return S(a)},multiple:!0,showUploadList:{showPreviewIcon:!0,showDownloadIcon:g,showRemoveIcon:!0},onPreview:function(l){var a=te((l==null?void 0:l.url)||"");return window.open(window.location.origin+a,"_target")},onDownload:p,onRemove:function(l){if(l.url){var a=l!=null&&l.fileUrl?l.fileUrl:l.url;a=a.startsWith("/")?a.slice(1):a,_e(a).then(function(d){var x=d.code,P=d.message;return x===0?!0:(message.error(P),!1)})}return!0},children:_jsx(Button,{children:"\u4E0A\u4F20\u6587\u4EF6"})})),_jsx(Access,{accessible:g,children:_jsx(Button,{style:{position:"absolute",top:0,right:"-15px"},type:"link",className:"batch-delete-btn",onClick:function(){return y()},children:"\u6279\u91CF\u4E0B\u8F7D"})})]})},nn=function(n,o){var u=document.createElement("a");u.style.display="none",u.style.height="0px",u.href=window.location.origin+te(n),u.download=o,document.body.appendChild(u),u.click(),document.body.removeChild(u)},te=function(n){var o=(n==null?void 0:n.split(";").length)>1?n.split(";")[1]:n;return o=o.startsWith("/")?o:"/"+o,o},tn=function(n){return n.split("/")[n.split("/").length-1].split("_").slice(1).join("_")},ve=s(5966),rn=s(39020);function an(e){var n=e.value,o=e.onChange,u=(0,fe.Z)({value:n,onChange:o}),c=D()(u,2),v=c[0],g=c[1];(0,b.useEffect)(function(){(!v||v.length<1)&&g([{key:new Date().getTime()}])},[]);var h=function(m){var C=m==null;g(function(t){var p=C?[].concat(le()(t),[{key:new Date().getTime()}]):t.filter(function(y,S){return S!==m});return p})},F=(0,b.useMemo)(function(){return[{title:"name",dataIndex:"name",render:function(m,C,t){return(0,r.jsx)(ve.Z,{name:["table",t,"name"]})}},{title:"sex",dataIndex:"sex",render:function(m,C,t){return(0,r.jsx)(ve.Z,{name:["table",t,"sex"]})}},{title:"opt",dataIndex:"option",render:function(m,C,t){return(0,r.jsx)(M.Access,{accessible:t===0,fallback:(0,r.jsx)(T.ZP,{size:"small",type:"primary",shape:"circle",danger:!0,onClick:function(){return h(t)},children:"-"}),children:(0,r.jsx)(T.ZP,{shape:"circle",size:"small",onClick:function(){return h()},children:"\uFF0B"})})}},{title:"key",dataIndex:"key",hideInTable:!0}]},[]);return(0,r.jsx)(rn.Z,{columns:F,pagination:!1,search:!1,dataSource:v,options:!1})}var on=function(){var n=(0,b.useRef)(),o=(0,b.useState)([]),u=D()(o,2),c=u[0],v=u[1],g=(0,b.useMemo)(function(){return[{title:"\u540D\u79F0",dataIndex:"deviceId",tip:"\u540D\u79F0\u662F\u552F\u4E00\u7684 key"},{title:"\u679A\u4E3E\u7C7B\u578B",dataIndex:"market",valueEnum:(0,Y.KP)([{label:"\u7C7B\u578B\u4E00",value:1},{label:"\u7C7B\u578B\u4E8C",value:2}]),formItemProps:{rules:[{required:!0}]},fieldProps:{mode:"multiple",maxTagCount:"responsive"}},{title:"\u6392\u5E8F",dataIndex:"market",valueType:"digit",formItemProps:{rules:[{required:!0}],addonAfter:"\u540E\u7F00",addonBefore:"\u524D\u7F00"},width:100,fieldProps:{precision:0,min:1}},{title:function(l,a){return a==="form"?"emm form":"emm table"},dataIndex:"market",search:!1,renderFormItem:function(){return(0,r.jsx)(pe.Z,{name:["market"],children:function(a){var d=a.market;return d===1||Array.isArray(d)&&d[0]===1?(0,r.jsx)(ge.Z,{name:"type",options:[{label:"\u7C7B\u578B\u4E00",value:1},{label:"\u7C7B\u578B\u4E8C",value:2}]}):(0,r.jsx)(xe.Z,{name:"note",rules:[{required:!0},{max:15}]})}})}},{title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"updatedAt",render:Y.Pj,hideInForm:!0,width:200,valueType:"dateRange",search:{transform:function(l){var a=D()(l,2),d=a[0],x=a[1];return{startAt:H()(d).startOf("day").unix(),endAt:H()(x).endOf("day").unix()}}}},{title:"\u6587\u4EF6",dataIndex:"file",search:!1,formItemProps:{rules:[{required:!0,message:"\u8BF7\u4E0A\u4F20\u56FE\u7247"}]},renderFormItem:function(){return(0,r.jsx)(en,{accept:".png"})},renderText:function(l){return(0,r.jsx)(T.ZP,{type:"link",target:"_blank",href:l,children:l})}},{title:"table",dataIndex:"table",search:!1,hideInTable:!0,renderFormItem:function(){return(0,r.jsx)(an,{})}},{dataIndex:"id",hideInTable:!0,search:!1,formItemProps:{hidden:!0}},{title:"\u64CD\u4F5C",valueType:"option",width:200,render:function(l,a){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T.ZP,{type:"link",onClick:function(){return m({visible:!0,defaultFormValues:j()(j()({},a),{},{file:"http://xxx.png",table:[{name:"1",sex:2}]}),title:"\u7F16\u8F91"})},children:"\u7F16\u8F91"}),(0,r.jsx)(T.ZP,{type:"link",danger:!0,onClick:function(){return S(a==null?void 0:a.deviceId)},children:"\u5220\u9664"})]})}}]},[]),h=Ze({columns:g,request:Ne(Me)}),F=h.proTableProps,f=h.proFormModalProps,m=h.setModal,C=h.reload,t=h.modal,p=(0,b.useCallback)(function(i){var l=t!=null&&t.isAdd?$e(i):ze(i);return l.then(function(a){var d=a.code,x=a.message;d===0?(w.ZP.success("".concat(t!=null&&t.isAdd?"\u65B0\u589E":"\u7F16\u8F91","\u6210\u529F")),C(t==null?void 0:t.isAdd),m({visible:!1})):w.ZP.error(x||"\u64CD\u4F5C\u5931\u8D25")})},[t==null?void 0:t.isAdd]),y=(0,b.useMemo)(function(){return f.columns.map(function(i){return i.dataIndex==="status"?j()(j()({},i),{},{initialValue:1,valueType:"radio"}):i})},[f.columns]),S=(0,b.useCallback)(function(i){(0,Y.WZ)({content:i?"\u786E\u5B9A\u5220\u9664\u6B64\u6570\u636E\u5417?":"\u786E\u5B9A\u5220\u9664\u9009\u4E2D\u7684".concat(c==null?void 0:c.length,"\u9879?"),onOk:function(){Ge(i?[i]:c).then(function(a){var d=a.code,x=a.message;d===0?(w.ZP.success("\u5220\u9664\u6210\u529F"),v([]),C(!0)):w.ZP.error(x||"\u5220\u9664\u5931\u8D25")})}})},[c]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Le,j()(j()({},F),{},{searchSpan:6,addText:"\u65B0\u5EFA",rowKey:"deviceId",search:{defaultCollapsed:!1},beforeSearchSubmit:function(l){return n.current=l,l},extraActions:[(0,r.jsx)(Ye,{name:"\u5BFC\u5165",template:"",service:Oe,reload:C,accept:".xlsx",tootip:"\u4EC5\u652F\u6301xlsx\u683C\u5F0F\u6587\u4EF6\uFF0C\u6587\u4EF6\u5C0F\u4E8E30MB",validator:function(l){return l.size>30*1024*1024||!/.xlsx$/.test(l.name)?(w.ZP.error("\u4EC5\u652F\u6301xlsx\u683C\u5F0F\u6587\u4EF6\uFF0C\u6587\u4EF6\u5C0F\u4E8E30MB"),!1):!0},children:(0,r.jsx)(T.ZP,{type:"primary",children:"\u5BFC\u5165\u6570\u636E"})},"upload"),(0,r.jsx)(T.ZP,{type:"primary",onClick:function(){return Ve(j()({},n.current))},children:"\u5BFC\u51FA"},"export"),(0,r.jsx)(T.ZP,{danger:!0,disabled:c.length<=0,type:"primary",onClick:function(){return S()},children:"\u6279\u91CF\u5220\u9664"},"batchDel")],scroll:{y:480},rowSelection:{onChange:function(l){return v(l)},selectedRowKeys:c,getCheckboxProps:function(){return{disabled:!1}}}})),(0,r.jsx)(Re,j()(j()({},f),{},{columns:y,onSubmit:p}))]})},ln=on},18685:function(){}}]);
